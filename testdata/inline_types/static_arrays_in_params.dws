// Test file for static array inline type syntax in function parameters
// Task 9.54: Static array bounds support in inline type expressions

program StaticArraysInParams;

// Test 1: Procedures with static array parameters
procedure PrintArray(arr: array[1..10] of Integer);
begin
  var i: Integer;
  for i := 1 to 10 do
    Print(arr[i]);
  PrintLn('');
end;

procedure FillArray(var arr: array[1..10] of Integer; value: Integer);
begin
  var i: Integer;
  for i := 1 to 10 do
    arr[i] := value;
end;

// Test 2: Functions with static array parameters
function SumArray(arr: array[1..5] of Integer): Integer;
begin
  var sum: Integer := 0;
  var i: Integer;
  for i := 1 to 5 do
    sum := sum + arr[i];
  Result := sum;
end;

function FindMax(arr: array[1..10] of Float): Float;
begin
  var max: Float := arr[1];
  var i: Integer;
  for i := 2 to 10 do
    if arr[i] > max then
      max := arr[i];
  Result := max;
end;

// Test 3: Functions returning static arrays (when supported)
// function CreateArray(): array[1..10] of Integer;
// begin
//   var arr: array[1..10] of Integer;
//   var i: Integer;
//   for i := 1 to 10 do
//     arr[i] := i * i;
//   Result := arr;
// end;

// Test 4: Zero-based array parameters
procedure ProcessBytes(data: array[0..255] of Integer);
begin
  var i: Integer;
  for i := 0 to 255 do
    data[i] := data[i] + 1;
end;

// Test 5: Negative bounds in parameters
function SumCentered(arr: array[-5..5] of Integer): Integer;
begin
  var sum: Integer := 0;
  var i: Integer;
  for i := -5 to 5 do
    sum := sum + arr[i];
  Result := sum;
end;

// Test 6: Nested static array parameters (matrices)
procedure InitMatrix(var matrix: array[1..3] of array[1..3] of Integer);
begin
  var i, j: Integer;
  for i := 1 to 3 do
    for j := 1 to 3 do
      matrix[i][j] := i * 10 + j;
end;

function MatrixSum(matrix: array[1..3] of array[1..3] of Integer): Integer;
begin
  var sum: Integer := 0;
  var i, j: Integer;
  for i := 1 to 3 do
    for j := 1 to 3 do
      sum := sum + matrix[i][j];
  Result := sum;
end;

// Test 7: Mixed static and dynamic array parameters
procedure ProcessMixed(fixed: array[1..10] of Integer; dynamic: array of String);
begin
  var i: Integer;
  for i := 1 to 10 do
    Print(fixed[i]);

  for i := 0 to Length(dynamic) - 1 do
    PrintLn(dynamic[i]);
end;

// Test 8: Multiple static array parameters
function CompareArrays(a: array[1..10] of Integer; b: array[1..10] of Integer): Boolean;
begin
  var i: Integer;
  for i := 1 to 10 do
    if a[i] <> b[i] then begin
      Result := false;
      Exit;
    end;
  Result := true;
end;

// Test 9: Different types in parameters
procedure HandleStrings(names: array[1..5] of String);
begin
  var i: Integer;
  for i := 1 to 5 do
    PrintLn('Name ' + IntToStr(i) + ': ' + names[i]);
end;

procedure ToggleFlags(var flags: array[1..10] of Boolean);
begin
  var i: Integer;
  for i := 1 to 10 do
    flags[i] := not flags[i];
end;

begin
  // Test static array parameter passing
  var numbers: array[1..10] of Integer;
  var small: array[1..5] of Integer;
  var centered: array[-5..5] of Integer;

  // Initialize arrays
  FillArray(numbers, 42);
  PrintArray(numbers);

  // Test function with static array
  small[1] := 10;
  small[2] := 20;
  small[3] := 30;
  small[4] := 40;
  small[5] := 50;
  var sum: Integer := SumArray(small);
  PrintLn('Sum: ' + IntToStr(sum));

  // Test negative bounds
  centered[-5] := 1;
  centered[0] := 5;
  centered[5] := 10;
  var centeredSum: Integer := SumCentered(centered);
  PrintLn('Centered sum: ' + IntToStr(centeredSum));

  // Test matrix parameters
  var matrix: array[1..3] of array[1..3] of Integer;
  InitMatrix(matrix);
  var matrixSum: Integer := MatrixSum(matrix);
  PrintLn('Matrix sum: ' + IntToStr(matrixSum));

  PrintLn('Static array parameter tests completed successfully!');
end.
