// Tests various for-in loop scenarios with sets
//
// NOTE: This file currently cannot run due to parser limitations:
// - Set type declarations ("set of") are not yet supported in type section parsing
// - This is a known limitation tracked separately from Task 9.10
// - The .out file contains manually verified expected output based on unit tests
// - Once parser support is added, this file should run and match the .out file

type
  TSmallEnum = (Alpha, Beta, Gamma, Delta, Epsilon);
  TSmallSet = set of TSmallEnum;

  TMediumEnum = (
    M00, M01, M02, M03, M04, M05, M06, M07, M08, M09,
    M10, M11, M12, M13, M14, M15, M16, M17, M18, M19
  );
  TMediumSet = set of TMediumEnum;

var
  s1, s2: TSmallSet;
  m1: TMediumSet;
  e: TSmallEnum;
  me: TMediumEnum;
  count: Integer;

begin
  // Test 1: Basic for-in over small set
  PrintLn('Test 1: Basic iteration');
  s1 := [Alpha, Gamma, Epsilon];
  for e in s1 do
    PrintLn(Ord(e));

  // Test 2: For-in over empty set (should not iterate)
  PrintLn('Test 2: Empty set');
  s2 := [];
  count := 0;
  for e in s2 do
    count := count + 1;
  PrintLn(count);

  // Test 3: For-in over single element
  PrintLn('Test 3: Single element');
  s2 := [Beta];
  for e in s2 do
    PrintLn(Ord(e));

  // Test 4: For-in with all elements
  PrintLn('Test 4: All elements');
  s1 := [Alpha, Beta, Gamma, Delta, Epsilon];
  for e in s1 do
    PrintLn(Ord(e));

  // Test 5: Nested for-in loops
  PrintLn('Test 5: Nested loops');
  s1 := [Alpha, Beta];
  s2 := [Gamma, Delta];
  for e in s1 do begin
    for e in s2 do
      PrintLn(Ord(e) * 10);
  end;

  // Test 6: For-in with break
  PrintLn('Test 6: Break statement');
  s1 := [Alpha, Beta, Gamma, Delta, Epsilon];
  for e in s1 do begin
    if e = Gamma then
      break;
    PrintLn(Ord(e));
  end;

  // Test 7: For-in with continue
  PrintLn('Test 7: Continue statement');
  s1 := [Alpha, Beta, Gamma, Delta, Epsilon];
  for e in s1 do begin
    if e = Gamma then
      continue;
    PrintLn(Ord(e));
  end;

  // Test 8: For-in with medium set (20 elements)
  PrintLn('Test 8: Medium set');
  m1 := [M00, M05, M10, M15, M19];
  for me in m1 do
    PrintLn(Ord(me));

  // Test 9: Modifying variable in loop (should not affect set)
  PrintLn('Test 9: Variable modification');
  s1 := [Alpha, Beta, Gamma];
  count := 0;
  for e in s1 do begin
    count := count + 1;
  end;
  PrintLn(count);

  // Test 10: For-in with conditional inside
  PrintLn('Test 10: Conditional in loop');
  s1 := [Alpha, Beta, Gamma, Delta, Epsilon];
  for e in s1 do begin
    if Ord(e) mod 2 = 0 then
      PrintLn('Even: ' + IntToStr(Ord(e)))
    else
      PrintLn('Odd: ' + IntToStr(Ord(e)));
  end;
end.
